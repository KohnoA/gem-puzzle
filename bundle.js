(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var r=n.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&!t;)t=r[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),o=document.createElement("div"),s=document.createElement("div");function a(e=16){let t=1;for(;t<=e;){let r=document.createElement("button");n.append(r),r.classList.add("grid-button"),r.setAttribute("draggable","true"),9===e&&r.classList.add("grid-button-three"),16===e&&r.classList.add("grid-button-four"),25===e&&r.classList.add("grid-button-five"),36===e&&r.classList.add("grid-button-six"),49===e&&r.classList.add("grid-button-seven"),64===e&&r.classList.add("grid-button-eight"),r.innerHTML=t,t++}}document.body.append(t),t.prepend(s),t.prepend(n),t.prepend(o),t.prepend(r),t.classList.add("container"),n.classList.add("grid"),s.classList.add("game-model-containder"),o.classList.add("time-moves-container"),r.classList.add("button-container"),r.innerHTML='\n    <button class="shuffle" type="button">Shuffle</button>\n    <button class="audio" type="button">Audio</button>\n    <button class="save" type="button">Save</button>\n    <button class="results" type="button">Results</button>\n    ',o.innerHTML='\n    <p class="moves-wrapper">Moves: <span class="moves">0</span></p>\n    \n    <p class="time-wrapper">Time: <span class="time">00:00</span></p>\n    ',a(),s.innerHTML='\n    <p class="game-model-wrapper">Frame size: <span class="current-game-model">4x4</span></p>\n    \n    <p class="other-game-models">\n        Other size:\n        <a class="three" href="#">3x3</a>\n        <a class="four current-size" href="#">4x4</a>\n        <a class="five" href="#">5x5</a>\n        <a class="six" href="#">6x6</a>\n        <a class="seven" href="#">7x7</a>\n        <a class="eight" href="#">8x8</a>\n    </p>\n    ';const l=document.querySelector(".results"),c=document.createElement("div");document.body.append(c),c.classList.add("overlay");const i=document.createElement("div"),d=document.createElement("h3"),u=document.createElement("ul"),m=document.querySelector(".overlay");function g(){te(u),i.remove(),c.classList.remove("overlay-show")}l.addEventListener("click",(function(){if(c.classList.add("overlay-show"),document.body.append(i),i.classList.add("results-container"),i.append(d),d.textContent="Best results",d.classList.add("results-title"),i.append(u),u.classList.add("result-list"),localStorage.getItem("BestResults")){let e=JSON.parse(localStorage.getItem("BestResults"));for(let t=0;t<e.length;t++){const n=document.createElement("li");u.append(n),n.classList.add("result-item"),n.textContent=e[t]}}})),m.addEventListener("click",g),i.addEventListener("click",g);const f=e.p+"e7d93cfac6f167a2bde59ce9f473332a.mp3",p=document.querySelector(".moves"),S=document.querySelector(".shuffle"),h=document.querySelector(".grid"),y=document.querySelector(".audio"),v=document.querySelector(".other-game-models"),L=new Audio;let b,x=!0,E=0;function I(e,t){for(let n=0;n<t.length;n++)for(let r=0;r<t[n].length;r++)if(t[n][r]===e)return{x:r,y:n}}function M(e,t){const n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return!(1!==n&&1!==r||e.x!==t.x&&e.y!==t.y)}function T(e,t,n){const r=n[e.y][e.x];n[e.y][e.x]=n[t.y][t.x],n[t.y][t.x]=r,function(e){let t=new Array(+K.innerHTML).fill(0).map(((e,t)=>t+1)),n=e.flat();for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}(n)&&(b=`Time: ${String($).padStart(2,0)}:${String(A).padStart(2,0)} / Moves: ${E} - ${n.length}x${n.length}`,setTimeout((()=>{alert(`Hurray! You have solved the puzzle for ${String($).padStart(2,0)}:${String(A).padStart(2,0)} and ${E} moves!`),ne(),B(),E=0,p.textContent=E}),300),function(e){if(localStorage.getItem("BestResults")){let t=JSON.parse(localStorage.getItem("BestResults"));t.push(e),t.length>10&&t.shift(),localStorage.setItem("BestResults",JSON.stringify(t))}else localStorage.setItem("BestResults",JSON.stringify([e]))}(b))}function z(e){const t=+K.innerHTML,n=I(+e.innerHTML,G),r=I(t,G);M(n,r)&&(E++,p.textContent=E,T(n,r,G),X(G),1===E&&setTimeout(N,800),x&&L.play())}localStorage.getItem("moves")&&(E=localStorage.getItem("moves"),p.textContent=E),L.src=f,L.volume=.5,y.addEventListener("click",(function(){this.classList.toggle("stop-audio"),x=!this.classList.contains("stop-audio")})),S.addEventListener("click",(()=>{E=0,p.textContent=E})),v.addEventListener("click",(e=>{e.target.closest("a")&&(E=0,p.textContent=E)})),h.addEventListener("click",(e=>{const t=e.target.closest(".grid-button");t&&z(t)}));let q=null;h.addEventListener("dragstart",(e=>{q=e.target.closest(".grid-button")})),h.addEventListener("dragover",(e=>{"grid-button"!==e.target.className&&"grid"===e.target.className?(e.preventDefault(),h.style.backgroundColor="rgb(173, 173, 173)"):h.style.backgroundColor="lightgray"})),h.addEventListener("drop",(e=>{"grid"===e.target.className&&z(q)})),h.addEventListener("dragend",(()=>{h.style.backgroundColor="lightgray"}));const C=document.querySelector(".time"),H=document.querySelector(".shuffle"),k=document.querySelector(".other-game-models");let w,$=0,A=0;function N(){A++,60===A&&(A=0,$++),60===$&&(A=0,$=0),C.textContent=String($).padStart(2,0)+":"+String(A).padStart(2,0),w=setTimeout(N,1e3)}function B(){A=0,$=0,C.textContent="00:00",clearTimeout(w)}localStorage.getItem("timeMinutes")&&localStorage.getItem("timeSeconds")&&($=localStorage.getItem("timeMinutes"),A=localStorage.getItem("timeSeconds"),N()),H.addEventListener("click",B),k.addEventListener("click",(e=>{e.target.closest("a")&&B()}));const O=document.querySelector(".shuffle"),R=document.querySelector(".other-game-models"),J=document.querySelector(".current-game-model"),j=document.querySelector(".grid"),D=document.querySelector(".four"),F=document.querySelectorAll(".other-game-models a"),P={"3x3":9,"4x4":16,"5x5":25,"6x6":36,"7x7":49,"8x8":64};let Y=Array.from(document.querySelectorAll(".grid-button")),G=W(Y.map((e=>+e.innerHTML))),K=Y[Y.length-1],Q=D,U=P[Q.innerHTML],V={y:200,x:200};if(localStorage.getItem("puzzle")&&localStorage.getItem("frame-size")){G=JSON.parse(localStorage.getItem("puzzle")),J.textContent=localStorage.getItem("frame-size");let e=G.flat().length;te(j),a(e),Y=Array.from(document.querySelectorAll(".grid-button")),K=Y[Y.length-1],F.forEach((e=>{e.classList.remove("current-size"),e.innerHTML===J.innerHTML&&ee(e)}))}function W(e,t=4){const n=[];let r=[];for(let o=0;o<e.length;o++)r.push(e[o]),r.length===t&&(n.push(r),r=[]);return n}function X(e){for(let t=0;t<e.length;t++)for(let n=0;n<e[t].length;n++){let r=e[t][n];Y[r-1].style.transform=`translate3D(${100*n}%, ${100*t}%, 0)`}}function Z(e){const t=I(+K.innerHTML,e),n=function(e,t,n){const r=[];for(let o=0;o<t.length;o++)for(let s=0;s<t[o].length;s++)!M({y:o,x:s},e)||n.y===o&&n.x===s||r.push({y:o,x:s});return r}(t,e,V);T(n.sort((()=>Math.random()-.5))[0],t,e),V=t,X(e)}function _(e){let t,n=0;for(t=U>25?180:60;n<t;)Z(e),n++}function ee(e){Q&&Q.classList.remove("current-size"),Q=e,Q.classList.add("current-size"),J.textContent=Q.textContent}function te(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function ne(){_(G),localStorage.removeItem("moves"),localStorage.removeItem("puzzle"),localStorage.removeItem("frame-size"),localStorage.removeItem("timeMinutes"),localStorage.removeItem("timeSeconds")}K.style.display="none",R.addEventListener("click",(e=>{let t=e.target.closest("a");t&&(ee(t),U=P[Q.innerHTML],te(j),a(U),Y=Array.from(document.querySelectorAll(".grid-button")),G=W(Y.map((e=>+e.innerHTML)),+Q.innerHTML[0]),K=Y[Y.length-1],K.style.display="none",_(G),B())})),O.addEventListener("click",ne),X(G),localStorage.getItem("puzzle")||_(G),document.querySelector(".save").addEventListener("click",(function(){localStorage.setItem("moves",E),localStorage.setItem("timeMinutes",$),localStorage.setItem("timeSeconds",A),localStorage.setItem("puzzle",JSON.stringify(G)),localStorage.setItem("frame-size",J.innerHTML)}))})();